webpackJsonp([12],{F92Q:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("Dd8w"),i=s.n(e),o=(s("IcnI"),s("NYxO")),r={name:"CIHead",props:["menuItem","flowID"],data:function(){return{ciTaskSearchKey:"",projectCITasks:[]}},methods:i()({},Object(o.d)("citask",["setCITaskCreateDialogShow","setCITaskSearchKey"]),Object(o.d)("citaskflow",["setCITaskFlowCreateDialogShow"]),{loadCITaskList:function(){var t=this;this.$axios.get("/api/ci/project/my").then(function(a){t.projectCITasks=a.data.result},function(t){})},filterCITask:function(t){if(this.initCITaskStatus(),this.setCITaskSearchKey(t),""!==t.trim())for(var a=0;a<this.projectCITasks.length;a++){this.projectCITasks[a].CITaskCount=0;for(var s=0;s<this.projectCITasks[a].CITasks.length;s++){var e=this.projectCITasks[a].CITasks[s];e.TaskName.toUpperCase().indexOf(t.toUpperCase())>-1?(e.Display=!0,this.projectCITasks[a].CITaskCount++):e.Display=!1}}},initCITaskStatus:function(){for(var t=0;t<this.projectCITasks.length;t++){this.projectCITasks[t].CITaskCount=0;for(var a=0;a<this.projectCITasks[t].CITasks.length;a++){this.projectCITasks[t].CITasks[a].Display=!0,this.projectCITasks[t].CITaskCount++}}},onAddCITask:function(){this.setCITaskCreateDialogShow(!0)},onAddCITaskFlow:function(){this.setCITaskFlowCreateDialogShow(!0)}}),created:function(){this.loadCITaskList()},components:{}},c={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"app-body-head-default"},[s("div",{staticClass:"app-body-header-bar-default"},[s("Row",[s("Col",{attrs:{lg:16,md:14,sm:16,xs:16}},[s("div",{staticClass:"app-body-header-leftbar-default"},[s("ul",{staticClass:"app-body-head-menu"},[s("router-link",{staticClass:"app-body-head-menu-item",attrs:{to:"/ci/task",tag:"li","active-class":"app-body-head-menu-item-active"}},[s("a",{attrs:{href:"/ci/task"}},[s("i",{staticClass:"fa fa-fw  fa-bus"}),t._v("任务")])]),t._v(" "),s("router-link",{staticClass:"app-body-head-menu-item",attrs:{to:"/ci/taskflow",tag:"li","active-class":"app-body-head-menu-item-active"}},[s("a",{attrs:{href:"/ci/taskflow"}},[s("i",{staticClass:"fa fa-fw  fa-bus"}),t._v("任务流")])]),t._v(" "),s("li",{staticClass:"app-body-head-menu-item"},[s("a",{attrs:{href:"/ci/settings/global_variable"}},[s("i",{staticClass:"fa fa-fw  fa-bus"}),t._v("设置")])])],1)])]),t._v(" "),s("Col",{attrs:{lg:4,md:4,sm:0,xs:0}},[s("div",{staticStyle:{"padding-top":"20px",height:"inherit"}},["task"===t.menuItem?s("AutoComplete",{staticStyle:{width:"100%"},attrs:{size:"small",transfer:!0,icon:"ios-search",placeholder:"输入任务名称，查找任务！"},on:{"on-search":t.filterCITask},model:{value:t.ciTaskSearchKey,callback:function(a){t.ciTaskSearchKey=a},expression:"ciTaskSearchKey"}},[s("div",{staticStyle:{"overflow-y":"scroll","max-height":"400px"}},t._l(t.projectCITasks,function(a){return a.CITaskCount>0?s("div",{staticClass:"demo-auto-complete-item"},[s("div",{staticClass:"demo-auto-complete-group"},[s("span",{staticStyle:{"padding-left":"10px"}},[s("Avatar",{attrs:{src:a.PBAvatar}})],1),t._v(" "),s("span",[t._v(t._s(a.ProjectName))]),t._v(" "),s("span",[t._v("  ("+t._s(a.CITaskCount)+")")])]),t._v(" "),t._l(a.CITasks,function(a){return a.Display?s("Option",{key:a.ID,attrs:{value:a.TaskName}},[s("a",{staticClass:"demo-auto-complete-title",attrs:{href:a.TaskHistoryURL}},[t._v(t._s(a.TaskName))])]):t._e()})],2):t._e()}))]):t._e()],1)]),t._v(" "),s("Col",{attrs:{lg:4,md:6,sm:8,xs:8}},[s("div",{staticClass:"app-body-header-rightbar-default",staticStyle:{"padding-top":"15px",height:"inherit"}},["task"===t.menuItem?s("span",{on:{click:t.onAddCITask}},[s("Avatar",{staticClass:"cursor-hand",staticStyle:{"background-color":"#32be77"},attrs:{icon:"md-add"}})],1):t._e(),t._v(" "),"taskflow"===t.menuItem?s("span",{on:{click:t.onAddCITaskFlow}},[s("Avatar",{staticClass:"cursor-hand",staticStyle:{"background-color":"#32be77"},attrs:{icon:"md-add"}})],1):t._e()])])],1)],1)])},staticRenderFns:[]};var n=s("VU/8")(r,c,!1,function(t){s("cPRH")},"data-v-2f7b0044",null);a.default=n.exports},cPRH:function(t,a){}});
//# sourceMappingURL=12.6ed8b04ac238e0a25723.js.map