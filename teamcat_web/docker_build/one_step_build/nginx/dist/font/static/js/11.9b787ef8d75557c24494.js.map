{"version":3,"sources":["webpack:///src/views/home/HomeSummary.vue","webpack:///./src/util/cookie.js","webpack:///./src/views/home/HomeSummary.vue?350c","webpack:///./src/views/home/HomeSummary.vue"],"names":["computed","extends_default","Object","vuex_esm","arr","reg","RegExp","document","cookie","match","_this","this","_activity$data","count","next","results","_this2","task_count","issue_count","fortesting_count","_this3","result","_this4","loadToDoSummary","loadMyProjectList","loadActivity","home_HomeSummary","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","style","summaryHeight","lg","md","sm","xs","padding","dis-hover","_v","type","justify","staticStyle","span","height","_s","toDoSummary","issueCount","fortestingCount","taskCount","margin-top","_l","project","key","id","width","float","margin","bordered","text-align","href","src","PBAvatar","padding-top","color","PBTitle","on-reach-bottom","handleReachBottom","activityHiehgt","activity","item","word-break","white-space","margin-right","ActionTimeStr","background-color","size","UserName","ChangeMessage","ObjectRepr","staticRenderFns","Component","__webpack_require__","normalizeComponent","HomeSummary","ssrContext","__webpack_exports__"],"mappings":"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","file":"font/static/js/11.9b787ef8d75557c24494.js","sourcesContent":["<template>\n  <div class=\"home-summary\">\n    <Row :gutter=\"16\">\n      <Col :lg=\"18\" :md=\"24\" :sm=\"24\" :xs=\"24\" :style=\"'height:'+summaryHeight+'px'+'; overflow-y:scroll;'\">\n      <div >\n        <Card  :padding=\"0\" dis-hover>\n          <div class=\"home-summary-card-title\">\n            待处理事项:\n          </div>\n          <Row type=\"flex\" justify=\"space-between\">\n            <Col span=\"8\" style=\"padding: 20px;\">\n               <Card :padding=\"20\" style=\"height: 100px;\" dis-hover>\n                 <div class=\"summary-number-title\">问题:</div>\n                 <div class=\"summary-number-content\">{{ toDoSummary.issueCount }}</div>\n               </Card>\n            </Col>\n            <Col span=\"8\"  style=\"padding: 20px\" >\n             <Card :padding=\"20\" style=\"height: 100px;\" dis-hover>\n                 <div class=\"summary-number-title\">提测:</div>\n                 <div class=\"summary-number-content\">{{ toDoSummary.fortestingCount }}</div>\n             </Card>\n            </Col>\n            <Col span=\"8\"  style=\"padding: 20px\">\n             <Card :padding=\"20\" style=\"height: 100px;\" dis-hover>\n\n                 <div class=\"summary-number-title\">任务:</div>\n                 <div class=\"summary-number-content\">{{ toDoSummary.taskCount }}</div>\n             </Card>\n            </Col>\n          </Row>\n        </Card>\n        <Card  :padding=\"0\" style=\"margin-top: 20px;\" dis-hover>\n          <div class=\"home-summary-card-title\">\n            活跃项目:\n          </div>\n          <Row :gutter=\"16\">\n            <Col :lg=\"5\" :md=\"6\" :sm=\"8\" :xs=\"12\" v-for=\"project in activeProject\" :key=\"project.id\">\n            <Card     style=\"width:230px;height:180px;float:left;margin:20px;\" :bordered=\"false\">\n              <div style=\"text-align:center;height:110px;\">\n                <a :href=\"'/project/'+  project.id +'/issue/all'\">\n                  <img :src=\"''+project.PBAvatar\" style=\"width:80%;height:80px;\">\n                </a>\n              </div>\n              <div style=\"padding-top: 10px;color:#333;text-align: center\">{{ project.PBTitle }}</div>\n            </Card>\n            </Col>\n          </Row>\n        </Card>\n      </div>\n      </Col>\n      <Col :lg=\"6\" :md=\"0\" :sm=\"0\" :xs=\"0\">\n      <div >\n        <Card  :padding=\"0\" dis-hover>\n          <div class=\"home-summary-card-title\">\n            动态:\n          </div>\n            <Timeline style=\"padding:20px; text-align: left;\">\n              <Scroll :on-reach-bottom=\"handleReachBottom\" :height=\"activityHiehgt\">\n              <TimelineItem color=\"green\" v-for=\"item in activity.data\" :key=\"item.id\">\n\n                <div style=\"word-break: break-all;white-space: normal;\" >\n                  <span style=\"margin-right: 10px;\">{{ item.ActionTimeStr }}</span>\n                  <span style=\"margin-right: 10px;\"><Avatar size=\"small\" style=\"background-color:#388E8E\">{{ item.UserName }}</Avatar></span>\n                  <span style=\"margin-right: 10px;\">{{ item.ChangeMessage }}</span>\n                  <span>\n                    {{ item.ObjectRepr }}\n                  </span>\n\n                </div>\n\n              </TimelineItem>\n                </Scroll>\n            </Timeline>\n        </Card>\n      </div>\n      </Col>\n    </Row>\n  </div>\n\n</template>\n\n<script>\n  import store from '../../store/index.js'\n  import { mapGetters,mapMutations} from 'vuex'\n  import { getCookie } from '../../util/cookie'\n  export default {\n    name: 'HomeSummary',\n    data () {\n      return {\n        toDoSummary: {\n          taskCount: 0,\n          issueCount: 0,\n          fortestingCount: 0,\n        },\n        activeProject: [],\n        activity: {\n          next: '',\n          data: [],\n          count: 0\n        }\n      }\n    },\n    computed: {\n      ...mapGetters(['appBodyHeight']),\n      summaryHeight: function () {\n        return  this.appBodyHeight - 33\n      },\n      activityHiehgt: function () {\n        console.log(getCookie('sessionid'))\n        return this.appBodyHeight - 110\n      }\n    },\n    methods: {\n      handleReachBottom: function () {\n        this.$axios.get(this.activity.next).then(response => {\n          this.activity.count = response.data.result.count\n          this.activity.next = response.data.result.next\n          this.activity.data.push(...response.data.result.results)\n        }, response => {\n        })\n      },\n      loadToDoSummary: function () {\n        this.$axios.get('/api/home/todo/summary').then(response => {\n          this.toDoSummary.taskCount=response.data.result.task_count\n          this.toDoSummary.issueCount=response.data.result.issue_count\n          this.toDoSummary.fortestingCount=response.data.result.fortesting_count\n        }, response => {\n        })\n      },\n\n      loadMyProjectList: function () {\n        this.$axios.get('/api/project/list?latest=1&my=1').then(response => {\n          this.activeProject = response.data.result\n        }, response => {\n        })\n      },\n      loadActivity: function () {\n        this.$axios.get('/api/home/activity/list').then(response => {\n          this.activity.count = response.data.result.count\n          this.activity.next = response.data.result.next\n          this.activity.data = response.data.result.results\n        }, response => {\n        })\n      }\n    },\n    created: function () {\n      this.loadToDoSummary()\n      this.loadMyProjectList()\n      this.loadActivity()\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n  .home-summary{\n    padding-left:20px;\n    padding-right:20px;\n\n  }\n  .home-summary-card-title\n  {\n    height:41px;\n    text-align: left;\n    padding-left: 20px;\n    padding-top:10px;\n    background-color: #f5f7f9;\n  }\n  .summary-number-title{\n    text-align: left;\n    margin-left: -10px;\n    margin-top: -18px;\n    font-size: 18px;\n  }\n\n  .summary-number-content{\n    text-align: center;\n    font-size: 30px;\n  }\n\n  .content{\n    padding-left: 5px;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/home/HomeSummary.vue","const getCookie = function (name) {\n  var arr, reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\")\n  if (arr = document.cookie.match(reg))\n    return (arr[2]);\n  else\n    return null;\n}\n\nexport {\n  getCookie\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/cookie.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-summary\"},[_c('Row',{attrs:{\"gutter\":16}},[_c('Col',{style:('height:'+_vm.summaryHeight+'px'+'; overflow-y:scroll;'),attrs:{\"lg\":18,\"md\":24,\"sm\":24,\"xs\":24}},[_c('div',[_c('Card',{attrs:{\"padding\":0,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"home-summary-card-title\"},[_vm._v(\"\\n          待处理事项:\\n        \")]),_vm._v(\" \"),_c('Row',{attrs:{\"type\":\"flex\",\"justify\":\"space-between\"}},[_c('Col',{staticStyle:{\"padding\":\"20px\"},attrs:{\"span\":\"8\"}},[_c('Card',{staticStyle:{\"height\":\"100px\"},attrs:{\"padding\":20,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"summary-number-title\"},[_vm._v(\"问题:\")]),_vm._v(\" \"),_c('div',{staticClass:\"summary-number-content\"},[_vm._v(_vm._s(_vm.toDoSummary.issueCount))])])],1),_vm._v(\" \"),_c('Col',{staticStyle:{\"padding\":\"20px\"},attrs:{\"span\":\"8\"}},[_c('Card',{staticStyle:{\"height\":\"100px\"},attrs:{\"padding\":20,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"summary-number-title\"},[_vm._v(\"提测:\")]),_vm._v(\" \"),_c('div',{staticClass:\"summary-number-content\"},[_vm._v(_vm._s(_vm.toDoSummary.fortestingCount))])])],1),_vm._v(\" \"),_c('Col',{staticStyle:{\"padding\":\"20px\"},attrs:{\"span\":\"8\"}},[_c('Card',{staticStyle:{\"height\":\"100px\"},attrs:{\"padding\":20,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"summary-number-title\"},[_vm._v(\"任务:\")]),_vm._v(\" \"),_c('div',{staticClass:\"summary-number-content\"},[_vm._v(_vm._s(_vm.toDoSummary.taskCount))])])],1)],1)],1),_vm._v(\" \"),_c('Card',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"padding\":0,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"home-summary-card-title\"},[_vm._v(\"\\n          活跃项目:\\n        \")]),_vm._v(\" \"),_c('Row',{attrs:{\"gutter\":16}},_vm._l((_vm.activeProject),function(project){return _c('Col',{key:project.id,attrs:{\"lg\":5,\"md\":6,\"sm\":8,\"xs\":12}},[_c('Card',{staticStyle:{\"width\":\"230px\",\"height\":\"180px\",\"float\":\"left\",\"margin\":\"20px\"},attrs:{\"bordered\":false}},[_c('div',{staticStyle:{\"text-align\":\"center\",\"height\":\"110px\"}},[_c('a',{attrs:{\"href\":'/project/'+  project.id +'/issue/all'}},[_c('img',{staticStyle:{\"width\":\"80%\",\"height\":\"80px\"},attrs:{\"src\":''+project.PBAvatar}})])]),_vm._v(\" \"),_c('div',{staticStyle:{\"padding-top\":\"10px\",\"color\":\"#333\",\"text-align\":\"center\"}},[_vm._v(_vm._s(project.PBTitle))])])],1)}))],1)],1)]),_vm._v(\" \"),_c('Col',{attrs:{\"lg\":6,\"md\":0,\"sm\":0,\"xs\":0}},[_c('div',[_c('Card',{attrs:{\"padding\":0,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"home-summary-card-title\"},[_vm._v(\"\\n          动态:\\n        \")]),_vm._v(\" \"),_c('Timeline',{staticStyle:{\"padding\":\"20px\",\"text-align\":\"left\"}},[_c('Scroll',{attrs:{\"on-reach-bottom\":_vm.handleReachBottom,\"height\":_vm.activityHiehgt}},_vm._l((_vm.activity.data),function(item){return _c('TimelineItem',{key:item.id,attrs:{\"color\":\"green\"}},[_c('div',{staticStyle:{\"word-break\":\"break-all\",\"white-space\":\"normal\"}},[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(item.ActionTimeStr))]),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_c('Avatar',{staticStyle:{\"background-color\":\"#388E8E\"},attrs:{\"size\":\"small\"}},[_vm._v(_vm._s(item.UserName))])],1),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(item.ChangeMessage))]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n                  \"+_vm._s(item.ObjectRepr)+\"\\n                \")])])])}))],1)],1)],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4d98bd70\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/home/HomeSummary.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4d98bd70\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HomeSummary.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HomeSummary.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HomeSummary.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d98bd70\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HomeSummary.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4d98bd70\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/home/HomeSummary.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}